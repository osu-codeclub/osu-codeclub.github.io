<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Horacio Lopez-Nicora">
<meta name="dcterms.date" content="2024-09-23">

<title>Data Wrangling 4: Merging/Joining Data Frames – OSU Code Club</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../img/codeclub_favicon_cc.jpg" rel="icon" type="image/jpeg">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-57476271c5f0467c372e20ff5d25630e.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-cd03ec2eb3d93126c40b3547cc84a9a2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../img/codeclub_favicon.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">OSU Code Club</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../pages/schedule.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../pages/previous.html"> 
<span class="menu-text">Previous sessions</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-more-resources" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">More resources</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-more-resources">    
        <li>
    <a class="dropdown-item" href="../../pages/setup.html">
 <span class="dropdown-text">Computer setup (installations) for Code Club</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/other.html">
 <span class="dropdown-text">Other code-related OSU activities</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="https://osu-codeclub.github.io/carpentries-feb-2025/">
 <span class="dropdown-text">Material of an R for beginners workshop (Feb ’25)</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://forms.gle/eYkMvmJShrcANUrt5"> 
<span class="menu-text">Sign up!</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/osu-codeclub/osu-codeclub.github.io">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/osu-codeclub/osu-codeclub.github.io/issues/new">
            Report an Issue
            </a>
          </li>
      </ul>
    </div>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#data-jazz-merging-with-dplyr-joins" id="toc-data-jazz-merging-with-dplyr-joins" class="nav-link" data-scroll-target="#data-jazz-merging-with-dplyr-joins"><span class="header-section-number">2</span> Data Jazz: Merging with <code>dplyr</code> Joins</a></li>
  <li><a href="#lets-explore-the-different-_join-funtions" id="toc-lets-explore-the-different-_join-funtions" class="nav-link" data-scroll-target="#lets-explore-the-different-_join-funtions"><span class="header-section-number">3</span> Let’s explore the different <code>_join</code> funtions</a>
  <ul class="collapse">
  <li><a href="#setting-the-stage" id="toc-setting-the-stage" class="nav-link" data-scroll-target="#setting-the-stage"><span class="header-section-number">3.1</span> Setting the Stage</a></li>
  <li><a href="#mutating-_join-funtions" id="toc-mutating-_join-funtions" class="nav-link" data-scroll-target="#mutating-_join-funtions"><span class="header-section-number">3.2</span> Mutating <code>_join</code> funtions:</a></li>
  <li><a href="#exercises-i" id="toc-exercises-i" class="nav-link" data-scroll-target="#exercises-i"><span class="header-section-number">3.3</span> Exercises I</a></li>
  <li><a href="#filtering-_join-funtions" id="toc-filtering-_join-funtions" class="nav-link" data-scroll-target="#filtering-_join-funtions"><span class="header-section-number">3.4</span> Filtering <code>_join</code> funtions:</a></li>
  <li><a href="#exercises-ii" id="toc-exercises-ii" class="nav-link" data-scroll-target="#exercises-ii"><span class="header-section-number">3.5</span> Exercises II</a></li>
  </ul></li>
  <li><a href="#merging-data-sets-in-base-r" id="toc-merging-data-sets-in-base-r" class="nav-link" data-scroll-target="#merging-data-sets-in-base-r"><span class="header-section-number">4</span> Merging Data Sets in Base R</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/osu-codeclub/osu-codeclub.github.io/edit/main/posts/S08E04_wrangling_04/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/osu-codeclub/osu-codeclub.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Wrangling 4: Merging/Joining Data Frames</h1>
  <div class="quarto-categories">
    <div class="quarto-category">r-basics</div>
    <div class="quarto-category">tidyverse</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Horacio Lopez-Nicora </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 23, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<hr>
<p><br></p>
<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>In the past two weeks, we’ve been learning about several functions from the <em>dplyr</em> package, a central workhorse of the tidyverse ecosystem, to manipulate data in data frames.</p>
<p>In real-world data analysis, it’s uncommon to work with just a single data frame. More often than not, you will be dealing with multiple data frames that you need to combine to effectively address your analytical questions.</p>
<p>In this session, we will explore the essential techniques for merging data frames using the <code>_join</code> functions provided by the <em>dplyr</em> package.</p>
<hr style="height:1pt; visibility:hidden;">
<section id="learning-objectives-for-today" class="level4">
<h4 class="anchored" data-anchor-id="learning-objectives-for-today">Learning objectives for today</h4>
<ol type="1">
<li><strong>Understand Join Fundamentals:</strong>
<ul>
<li>Grasp the basics of <strong>joins</strong> and their significance in merging datasets.</li>
<li>Learn about <em>keys</em> and their use in linking different data frames.</li>
</ul></li>
<li><strong>Explore Mutating Joins:</strong>
<ul>
<li>Get acquainted with <strong>mutating join</strong> functions in <code>dplyr</code>, such as <code>inner_join</code>, <code>left_join</code>, <code>right_join</code>, and <code>full_join</code>.</li>
<li>Learn how to add new columns to a data frame using matching records from another.</li>
</ul></li>
<li><strong>Discover Filtering Joins:</strong>
<ul>
<li>Learn how to use <strong>filtering join</strong> functions like <code>semi_join</code> and <code>anti_join</code>.</li>
<li>Understand how to retain or exclude records in one data frame based on matches with another data frame.</li>
</ul></li>
</ol>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="setting-up" class="level4">
<h4 class="anchored" data-anchor-id="setting-up">Setting up</h4>
<p>Load the tidyverse meta-package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<p><br></p>
</section>
</section>
<section id="data-jazz-merging-with-dplyr-joins" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="data-jazz-merging-with-dplyr-joins"><span class="header-section-number">2</span> Data Jazz: Merging with <code>dplyr</code> Joins</h2>
<p>Just as a <a href="https://medium.com/@birdlandjazz/what-exactly-is-jazz-anyway-9cc462f28c10">jazz</a> band brings together a variety of instruments to create a rich, spontaneous musical experience, data analysis often involves merging different data sets to form a coherent and insightful whole. Each data set can be thought of as an instrument in a jazz ensemble, contributing its unique timbre and melody to the overall composition.</p>
<p>When you use join functions from the `dplyr` package in R Studio, it’s like orchestrating an improvisational jazz performance where the trumpet’s crisp notes (one data set) harmonize with the saxophone’s smooth riffs (another data set), underpinned by the piano’s rhythmic chords (yet another data set).</p>
<p>By cleverly combining these data sets through joins, you can produce an insightful and dynamic data analysis, much like a jazz composition that resonates on multiple levels.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://www.shutterstock.com/g/barandash+karandashich"><img src="img/jazz.png" class="img-fluid figure-img" alt="Illustration by Barandash Karandashich"></a></p>
<figcaption>Illustration by Barandash Karandashich</figcaption>
</figure>
</div>
<hr style="height:1pt; visibility:hidden;">
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Looking to get excited about jazz? Click here for a book recommendation!
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><a href="https://www.amazon.com/But-Beautiful-Book-About-Jazz/dp/0312429479">But Beautiful: A Book About Jazz</a> by Geoff Dyer.</p>
</div>
</div>
</div>
<section id="to-explore-the-_join-functions-we-will-create-our-own-data-sets" class="level4">
<h4 class="anchored" data-anchor-id="to-explore-the-_join-functions-we-will-create-our-own-data-sets"><strong>To explore the <code>_join</code> functions we will create our own data sets:</strong></h4>
<section id="musicians-data-frame" class="level5">
<h5 class="anchored" data-anchor-id="musicians-data-frame"><strong>Musicians data frame:</strong></h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>musicians <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">musician_id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">"John Coltrane"</span>, <span class="st">"Miles Davis"</span>, <span class="st">"Thelonious Monk"</span>, <span class="st">"Ella Fitzgerald"</span>, <span class="st">"Louis Armstrong"</span>),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">instrument =</span> <span class="fu">c</span>(<span class="st">"Saxophone"</span>, <span class="st">"Trumpet"</span>, <span class="st">"Piano"</span>, <span class="st">"Vocals"</span>, <span class="st">"Trumpet"</span>),</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">years_active =</span> <span class="fu">c</span>(<span class="st">"1945-1967"</span>, <span class="st">"1944-1975"</span>, <span class="st">"1934-1975"</span>, <span class="st">"1934-1993"</span>, <span class="st">"1919-1971"</span>),</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">genre =</span> <span class="fu">c</span>(<span class="st">"Jazz"</span>, <span class="st">"Jazz"</span>, <span class="st">"Bebop"</span>, <span class="st">"Swing"</span>, <span class="st">"Jazz"</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["musician_id"],"name":[1],"type":["int"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["instrument"],"name":[3],"type":["chr"],"align":["left"]},{"label":["years_active"],"name":[4],"type":["chr"],"align":["left"]},{"label":["genre"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"John Coltrane","3":"Saxophone","4":"1945-1967","5":"Jazz"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz"},{"1":"3","2":"Thelonious Monk","3":"Piano","4":"1934-1975","5":"Bebop"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing"},{"1":"5","2":"Louis Armstrong","3":"Trumpet","4":"1919-1971","5":"Jazz"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="albums-data-frame" class="level5">
<h5 class="anchored" data-anchor-id="albums-data-frame"><strong>Albums data frame:</strong></h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>albums <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">album_id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">musician_id =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">album_title =</span> <span class="fu">c</span>(<span class="st">"Blue Train"</span>, <span class="st">"Kind of Blue"</span>, <span class="st">"Monk's Dream"</span>, <span class="st">"Bitches Brew"</span>, <span class="st">"Ella in Berlin"</span>, <span class="st">"Louis Armstrong Plays W.C. Handy"</span>),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">release_year =</span> <span class="fu">c</span>(<span class="dv">1957</span>, <span class="dv">1959</span>, <span class="dv">1963</span>, <span class="dv">1970</span>, <span class="dv">1960</span>, <span class="dv">1954</span>),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">genre =</span> <span class="fu">c</span>(<span class="st">"Hard Bop"</span>, <span class="st">"Modal Jazz"</span>, <span class="st">"Bebop"</span>, <span class="st">"Fusion"</span>, <span class="st">"Vocal Jazz"</span>, <span class="st">"Jazz"</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["album_id"],"name":[1],"type":["int"],"align":["right"]},{"label":["musician_id"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["album_title"],"name":[3],"type":["chr"],"align":["left"]},{"label":["release_year"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["genre"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"1","3":"Blue Train","4":"1957","5":"Hard Bop"},{"1":"2","2":"2","3":"Kind of Blue","4":"1959","5":"Modal Jazz"},{"1":"3","2":"3","3":"Monk's Dream","4":"1963","5":"Bebop"},{"1":"4","2":"2","3":"Bitches Brew","4":"1970","5":"Fusion"},{"1":"5","2":"4","3":"Ella in Berlin","4":"1960","5":"Vocal Jazz"},{"1":"6","2":"5","3":"Louis Armstrong Plays W.C. Handy","4":"1954","5":"Jazz"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="awards-data-frame" class="level5">
<h5 class="anchored" data-anchor-id="awards-data-frame"><strong>Awards data frame:</strong></h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>awards <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">award_id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">musician_id =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">5</span>),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">award_name =</span> <span class="fu">c</span>(<span class="st">"Grammy Hall of Fame"</span>, <span class="st">"Grammy Lifetime Achievement Award"</span>, <span class="st">"Grammy Hall of Fame"</span>, <span class="st">"National Medal of Arts"</span>, <span class="st">"Grammy Lifetime Achievement Award"</span>),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">c</span>(<span class="dv">1999</span>, <span class="dv">1990</span>, <span class="dv">1999</span>, <span class="dv">1987</span>, <span class="dv">1972</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["award_id"],"name":[1],"type":["int"],"align":["right"]},{"label":["musician_id"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["award_name"],"name":[3],"type":["chr"],"align":["left"]},{"label":["year"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"1","3":"Grammy Hall of Fame","4":"1999"},{"1":"2","2":"2","3":"Grammy Lifetime Achievement Award","4":"1990"},{"1":"3","2":"4","3":"Grammy Hall of Fame","4":"1999"},{"1":"4","2":"4","3":"National Medal of Arts","4":"1987"},{"1":"5","2":"5","3":"Grammy Lifetime Achievement Award","4":"1972"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="gigs-data-frame" class="level5">
<h5 class="anchored" data-anchor-id="gigs-data-frame"><strong>Gigs data frame:</strong></h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>gigs <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">gig_id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">musician_id =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">5</span>),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">venue =</span> <span class="fu">c</span>(<span class="st">"Blue Note"</span>, <span class="st">"Village Vanguard"</span>, <span class="st">"Birdland"</span>, <span class="st">"Newport Jazz Festival"</span>, <span class="st">"Montreux Jazz Festival"</span>, <span class="st">"Cotton Club"</span>),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">date =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">"1961-11-18"</span>, <span class="st">"1961-03-21"</span>, <span class="st">"1961-04-12"</span>, <span class="st">"1962-07-11"</span>, <span class="st">"1965-03-10"</span>, <span class="st">"1937-06-26"</span>)),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">city =</span> <span class="fu">c</span>(<span class="st">"New York"</span>, <span class="st">"New York"</span>, <span class="st">"New York"</span>, <span class="st">"Newport"</span>, <span class="st">"Montreux"</span>, <span class="st">"Harlem"</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["gig_id"],"name":[1],"type":["int"],"align":["right"]},{"label":["musician_id"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["venue"],"name":[3],"type":["chr"],"align":["left"]},{"label":["date"],"name":[4],"type":["date"],"align":["right"]},{"label":["city"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"1","3":"Blue Note","4":"1961-11-18","5":"New York"},{"1":"2","2":"2","3":"Village Vanguard","4":"1961-03-21","5":"New York"},{"1":"3","2":"2","3":"Birdland","4":"1961-04-12","5":"New York"},{"1":"4","2":"4","3":"Newport Jazz Festival","4":"1962-07-11","5":"Newport"},{"1":"5","2":"1","3":"Montreux Jazz Festival","4":"1965-03-10","5":"Montreux"},{"1":"6","2":"5","3":"Cotton Club","4":"1937-06-26","5":"Harlem"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<hr style="height:1pt; visibility:hidden;">
</section>
</section>
</section>
<section id="lets-explore-the-different-_join-funtions" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="lets-explore-the-different-_join-funtions"><span class="header-section-number">3</span> Let’s explore the different <code>_join</code> funtions</h2>
<p>When merging datasets, we typically integrate variables from one dataset into another using a specific “key” variable. Let’s examine our <strong>JAZZ</strong> datasets and explore the joining verbs:</p>
<section id="setting-the-stage" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="setting-the-stage"><span class="header-section-number">3.1</span> Setting the Stage</h3>
<div>

</div>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/setup_key.png" class="img-fluid figure-img"></p>
<figcaption>Key variables</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/setup2.png" class="img-fluid figure-img"></p>
<figcaption>Set up</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="mutating-_join-funtions" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="mutating-_join-funtions"><span class="header-section-number">3.2</span> Mutating <code>_join</code> funtions:</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://r4ds.hadley.nz/joins"><img src="img/venn.png" class="img-fluid figure-img" alt="Illustration by Barandash Karandashich"></a></p>
<figcaption>Chapter 19: Joins [R4DS (2ed)]</figcaption>
</figure>
</div>
<section id="left_join-and-right_join" class="level4">
<h4 class="anchored" data-anchor-id="left_join-and-right_join"><strong><code>left_join</code> (and <code>right_join</code>)</strong></h4>
<div>

</div>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/left_join.png" class="img-fluid figure-img"></p>
<figcaption>left_join</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/right_join.png" class="img-fluid figure-img"></p>
<figcaption>right_join</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p><strong>Left join: Musicians with all their gigs.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>musicians <span class="sc">|&gt;</span> <span class="fu">left_join</span>(gigs, </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">by =</span> <span class="fu">join_by</span>(musician_id)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["musician_id"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["instrument"],"name":[3],"type":["chr"],"align":["left"]},{"label":["years_active"],"name":[4],"type":["chr"],"align":["left"]},{"label":["genre"],"name":[5],"type":["chr"],"align":["left"]},{"label":["gig_id"],"name":[6],"type":["int"],"align":["right"]},{"label":["venue"],"name":[7],"type":["chr"],"align":["left"]},{"label":["date"],"name":[8],"type":["date"],"align":["right"]},{"label":["city"],"name":[9],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"John Coltrane","3":"Saxophone","4":"1945-1967","5":"Jazz","6":"1","7":"Blue Note","8":"1961-11-18","9":"New York"},{"1":"1","2":"John Coltrane","3":"Saxophone","4":"1945-1967","5":"Jazz","6":"5","7":"Montreux Jazz Festival","8":"1965-03-10","9":"Montreux"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz","6":"2","7":"Village Vanguard","8":"1961-03-21","9":"New York"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz","6":"3","7":"Birdland","8":"1961-04-12","9":"New York"},{"1":"3","2":"Thelonious Monk","3":"Piano","4":"1934-1975","5":"Bebop","6":"NA","7":"NA","8":"<NA>","9":"NA"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing","6":"4","7":"Newport Jazz Festival","8":"1962-07-11","9":"Newport"},{"1":"5","2":"Louis Armstrong","3":"Trumpet","4":"1919-1971","5":"Jazz","6":"6","7":"Cotton Club","8":"1937-06-26","9":"Harlem"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><strong>Right join: All albums and related musicians.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>musicians <span class="sc">|&gt;</span> <span class="fu">right_join</span>(albums, </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">by =</span> <span class="fu">join_by</span>(musician_id)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["musician_id"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["instrument"],"name":[3],"type":["chr"],"align":["left"]},{"label":["years_active"],"name":[4],"type":["chr"],"align":["left"]},{"label":["genre.x"],"name":[5],"type":["chr"],"align":["left"]},{"label":["album_id"],"name":[6],"type":["int"],"align":["right"]},{"label":["album_title"],"name":[7],"type":["chr"],"align":["left"]},{"label":["release_year"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["genre.y"],"name":[9],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"John Coltrane","3":"Saxophone","4":"1945-1967","5":"Jazz","6":"1","7":"Blue Train","8":"1957","9":"Hard Bop"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz","6":"2","7":"Kind of Blue","8":"1959","9":"Modal Jazz"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz","6":"4","7":"Bitches Brew","8":"1970","9":"Fusion"},{"1":"3","2":"Thelonious Monk","3":"Piano","4":"1934-1975","5":"Bebop","6":"3","7":"Monk's Dream","8":"1963","9":"Bebop"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing","6":"5","7":"Ella in Berlin","8":"1960","9":"Vocal Jazz"},{"1":"5","2":"Louis Armstrong","3":"Trumpet","4":"1919-1971","5":"Jazz","6":"6","7":"Louis Armstrong Plays W.C. Handy","8":"1954","9":"Jazz"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="inner_join-and-full_join" class="level4">
<h4 class="anchored" data-anchor-id="inner_join-and-full_join"><strong><code>inner_join</code> (and <code>full_join</code>)</strong></h4>
<div>

</div>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/inner_join.png" class="img-fluid figure-img"></p>
<figcaption>inner_join</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/full_join.png" class="img-fluid figure-img"></p>
<figcaption>full_join</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p><strong>Inner join: Musicians and their albums.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>musicians <span class="sc">|&gt;</span> <span class="fu">inner_join</span>(awards, </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">by =</span> <span class="fu">join_by</span>(musician_id)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["musician_id"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["instrument"],"name":[3],"type":["chr"],"align":["left"]},{"label":["years_active"],"name":[4],"type":["chr"],"align":["left"]},{"label":["genre"],"name":[5],"type":["chr"],"align":["left"]},{"label":["award_id"],"name":[6],"type":["int"],"align":["right"]},{"label":["award_name"],"name":[7],"type":["chr"],"align":["left"]},{"label":["year"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"John Coltrane","3":"Saxophone","4":"1945-1967","5":"Jazz","6":"1","7":"Grammy Hall of Fame","8":"1999"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz","6":"2","7":"Grammy Lifetime Achievement Award","8":"1990"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing","6":"3","7":"Grammy Hall of Fame","8":"1999"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing","6":"4","7":"National Medal of Arts","8":"1987"},{"1":"5","2":"Louis Armstrong","3":"Trumpet","4":"1919-1971","5":"Jazz","6":"5","7":"Grammy Lifetime Achievement Award","8":"1972"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><strong>Full join: Complete overview of musicians and their awards.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>musicians <span class="sc">|&gt;</span> <span class="fu">full_join</span>(awards, </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">by =</span> <span class="fu">join_by</span>(musician_id)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["musician_id"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["instrument"],"name":[3],"type":["chr"],"align":["left"]},{"label":["years_active"],"name":[4],"type":["chr"],"align":["left"]},{"label":["genre"],"name":[5],"type":["chr"],"align":["left"]},{"label":["award_id"],"name":[6],"type":["int"],"align":["right"]},{"label":["award_name"],"name":[7],"type":["chr"],"align":["left"]},{"label":["year"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"John Coltrane","3":"Saxophone","4":"1945-1967","5":"Jazz","6":"1","7":"Grammy Hall of Fame","8":"1999"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz","6":"2","7":"Grammy Lifetime Achievement Award","8":"1990"},{"1":"3","2":"Thelonious Monk","3":"Piano","4":"1934-1975","5":"Bebop","6":"NA","7":"NA","8":"NA"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing","6":"3","7":"Grammy Hall of Fame","8":"1999"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing","6":"4","7":"National Medal of Arts","8":"1987"},{"1":"5","2":"Louis Armstrong","3":"Trumpet","4":"1919-1971","5":"Jazz","6":"5","7":"Grammy Lifetime Achievement Award","8":"1972"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="exercises-i" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="exercises-i"><span class="header-section-number">3.3</span> Exercises I</h3>
<p><strong>A)</strong> Find all albums by Miles Davis.</p>
<details>
<summary>
<b>Hint</b> (click here)
</summary>
Use an inner join to list all albums released by Miles Davis. Then use <code>filter()</code> to end up with a data set with information only for Miles Davis.
</details>
<details>
<summary>
<b>Solution</b> (click here)
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>musicians <span class="sc">|&gt;</span> <span class="fu">inner_join</span>(albums, <span class="at">by =</span> <span class="fu">join_by</span>(musician_id)) <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"Miles Davis"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="styled-output"><code># A tibble: 2 × 9
  musician_id name        instrument years_active genre.x album_id album_title 
        &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;       
1           2 Miles Davis Trumpet    1944-1975    Jazz           2 Kind of Blue
2           2 Miles Davis Trumpet    1944-1975    Jazz           4 Bitches Brew
# ℹ 2 more variables: release_year &lt;dbl&gt;, genre.y &lt;chr&gt;</code></pre>
</div>
</div>
</details>
<hr style="height:1pt; visibility:hidden;">
<p><strong>B)</strong> Combine musicians, gigs, and awards information.</p>
<details>
<summary>
<b>Hint</b> (click here)
</summary>
Perform a left join to combine musicians with their gigs and awards information.
</details>
<details>
<summary>
<b>Solution</b> (click here)
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>musicians <span class="sc">|&gt;</span> <span class="fu">left_join</span>(gigs, <span class="at">by =</span> <span class="fu">join_by</span>(musician_id)) <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(awards, <span class="at">by =</span> <span class="fu">join_by</span>(musician_id), <span class="at">relationship =</span> <span class="st">"many-to-many"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="styled-output"><code># A tibble: 8 × 12
  musician_id name   instrument years_active genre gig_id venue date       city 
        &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;  &lt;int&gt; &lt;chr&gt; &lt;date&gt;     &lt;chr&gt;
1           1 John … Saxophone  1945-1967    Jazz       1 Blue… 1961-11-18 New …
2           1 John … Saxophone  1945-1967    Jazz       5 Mont… 1965-03-10 Mont…
3           2 Miles… Trumpet    1944-1975    Jazz       2 Vill… 1961-03-21 New …
4           2 Miles… Trumpet    1944-1975    Jazz       3 Bird… 1961-04-12 New …
5           3 Thelo… Piano      1934-1975    Bebop     NA &lt;NA&gt;  NA         &lt;NA&gt; 
6           4 Ella … Vocals     1934-1993    Swing      4 Newp… 1962-07-11 Newp…
7           4 Ella … Vocals     1934-1993    Swing      4 Newp… 1962-07-11 Newp…
8           5 Louis… Trumpet    1919-1971    Jazz       6 Cott… 1937-06-26 Harl…
# ℹ 3 more variables: award_id &lt;int&gt;, award_name &lt;chr&gt;, year &lt;dbl&gt;</code></pre>
</div>
</div>
</details>
<p><strong>C)</strong> List of venues with musician information.</p>
<details>
<summary>
<b>Hint</b> (click here)
</summary>
Perform a right join to get a list of all gig venues and the associated musician details.
</details>
<details>
<summary>
<b>Solution</b> (click here)
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>musicians <span class="sc">|&gt;</span> <span class="fu">right_join</span>(gigs, <span class="at">by =</span> <span class="fu">join_by</span>(musician_id))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="styled-output"><code># A tibble: 6 × 9
  musician_id name   instrument years_active genre gig_id venue date       city 
        &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;  &lt;int&gt; &lt;chr&gt; &lt;date&gt;     &lt;chr&gt;
1           1 John … Saxophone  1945-1967    Jazz       1 Blue… 1961-11-18 New …
2           1 John … Saxophone  1945-1967    Jazz       5 Mont… 1965-03-10 Mont…
3           2 Miles… Trumpet    1944-1975    Jazz       2 Vill… 1961-03-21 New …
4           2 Miles… Trumpet    1944-1975    Jazz       3 Bird… 1961-04-12 New …
5           4 Ella … Vocals     1934-1993    Swing      4 Newp… 1962-07-11 Newp…
6           5 Louis… Trumpet    1919-1971    Jazz       6 Cott… 1937-06-26 Harl…</code></pre>
</div>
</div>
</details>
<hr style="height:1pt; visibility:hidden;">
</section>
<section id="filtering-_join-funtions" class="level3" data-number="3.4">
<h3 data-number="3.4" class="anchored" data-anchor-id="filtering-_join-funtions"><span class="header-section-number">3.4</span> Filtering <code>_join</code> funtions:</h3>
<div>

</div>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="http://lindsaydbrin.github.io/CREATE_R_Workshop/Lesson_-_dplyr_join.html"><img src="img/Join_AntiJoin.png" class="img-fluid figure-img" alt="Anti join"></a></p>
<figcaption>Anti join</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="http://lindsaydbrin.github.io/CREATE_R_Workshop/Lesson_-_dplyr_join.html"><img src="img/Join_InnerJoin.png" class="img-fluid figure-img" alt="Semi join"></a></p>
<figcaption>Semi join</figcaption>
</figure>
</div>
</div>
</div>
</div>
<section id="anti_join-and-semi_join" class="level4">
<h4 class="anchored" data-anchor-id="anti_join-and-semi_join"><strong><code>anti_join</code> (and <code>semi_join</code>)</strong></h4>
<div>

</div>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/anti.png" class="img-fluid figure-img"></p>
<figcaption>anti_join</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/semi.png" class="img-fluid figure-img"></p>
<figcaption>semi_join</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p><strong>Semi join: Musicians who have received awards.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>musicians <span class="sc">|&gt;</span> <span class="fu">semi_join</span>(awards, </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">by =</span> <span class="fu">join_by</span>(musician_id)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["musician_id"],"name":[1],"type":["int"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["instrument"],"name":[3],"type":["chr"],"align":["left"]},{"label":["years_active"],"name":[4],"type":["chr"],"align":["left"]},{"label":["genre"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"John Coltrane","3":"Saxophone","4":"1945-1967","5":"Jazz"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing"},{"1":"5","2":"Louis Armstrong","3":"Trumpet","4":"1919-1971","5":"Jazz"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<hr style="height:1pt; visibility:hidden;">
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What is the difference between <code>inner_join</code> and <code>semi_join</code> ?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Notice that the observations in both data frames are the similar, but that the inner join adds the variables from the data frame “y”, whereas the semi join only uses the “y” data frame to determine which observations to keep.</p>
</div>
</div>
</div>
</section>
</section>
<section id="exercises-ii" class="level3" data-number="3.5">
<h3 data-number="3.5" class="anchored" data-anchor-id="exercises-ii"><span class="header-section-number">3.5</span> Exercises II</h3>
<p><strong>A)</strong> Find musicians without any gigs.</p>
<details>
<summary>
<b>Hint</b> (click here)
</summary>
Using an anti join, find musicians who haven’t have any gigs in this period.
</details>
<details>
<summary>
<b>Solution</b> (click here)
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>musicians <span class="sc">|&gt;</span> <span class="fu">anti_join</span>(gigs, </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">by =</span> <span class="fu">join_by</span>(musician_id)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["musician_id"],"name":[1],"type":["int"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["instrument"],"name":[3],"type":["chr"],"align":["left"]},{"label":["years_active"],"name":[4],"type":["chr"],"align":["left"]},{"label":["genre"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"3","2":"Thelonious Monk","3":"Piano","4":"1934-1975","5":"Bebop"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</details>
<hr style="height:1pt; visibility:hidden;">
</section>
</section>
<section id="merging-data-sets-in-base-r" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="merging-data-sets-in-base-r"><span class="header-section-number">4</span> Merging Data Sets in Base R</h2>
<p>The <code>merge</code> function in base R can perform inner joins, left joins, right joins, and full joins by specifying appropriate parameters.</p>
<p><strong>Left join: Musicians with all their gigs.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">merge</span>(musicians, gigs, <span class="at">all.x =</span> <span class="cn">TRUE</span>, <span class="at">by =</span> <span class="st">"musician_id"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["musician_id"],"name":[1],"type":["int"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["instrument"],"name":[3],"type":["chr"],"align":["left"]},{"label":["years_active"],"name":[4],"type":["chr"],"align":["left"]},{"label":["genre"],"name":[5],"type":["chr"],"align":["left"]},{"label":["gig_id"],"name":[6],"type":["int"],"align":["right"]},{"label":["venue"],"name":[7],"type":["chr"],"align":["left"]},{"label":["date"],"name":[8],"type":["date"],"align":["right"]},{"label":["city"],"name":[9],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"John Coltrane","3":"Saxophone","4":"1945-1967","5":"Jazz","6":"1","7":"Blue Note","8":"1961-11-18","9":"New York"},{"1":"1","2":"John Coltrane","3":"Saxophone","4":"1945-1967","5":"Jazz","6":"5","7":"Montreux Jazz Festival","8":"1965-03-10","9":"Montreux"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz","6":"2","7":"Village Vanguard","8":"1961-03-21","9":"New York"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz","6":"3","7":"Birdland","8":"1961-04-12","9":"New York"},{"1":"3","2":"Thelonious Monk","3":"Piano","4":"1934-1975","5":"Bebop","6":"NA","7":"NA","8":"<NA>","9":"NA"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing","6":"4","7":"Newport Jazz Festival","8":"1962-07-11","9":"Newport"},{"1":"5","2":"Louis Armstrong","3":"Trumpet","4":"1919-1971","5":"Jazz","6":"6","7":"Cotton Club","8":"1937-06-26","9":"Harlem"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><strong>Right join: All albums and related musicians.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">merge</span>(musicians, albums, <span class="at">all.y =</span> <span class="cn">TRUE</span>, <span class="at">by =</span> <span class="st">"musician_id"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["musician_id"],"name":[1],"type":["int"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["instrument"],"name":[3],"type":["chr"],"align":["left"]},{"label":["years_active"],"name":[4],"type":["chr"],"align":["left"]},{"label":["genre.x"],"name":[5],"type":["chr"],"align":["left"]},{"label":["album_id"],"name":[6],"type":["int"],"align":["right"]},{"label":["album_title"],"name":[7],"type":["chr"],"align":["left"]},{"label":["release_year"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["genre.y"],"name":[9],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"John Coltrane","3":"Saxophone","4":"1945-1967","5":"Jazz","6":"1","7":"Blue Train","8":"1957","9":"Hard Bop"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz","6":"2","7":"Kind of Blue","8":"1959","9":"Modal Jazz"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz","6":"4","7":"Bitches Brew","8":"1970","9":"Fusion"},{"1":"3","2":"Thelonious Monk","3":"Piano","4":"1934-1975","5":"Bebop","6":"3","7":"Monk's Dream","8":"1963","9":"Bebop"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing","6":"5","7":"Ella in Berlin","8":"1960","9":"Vocal Jazz"},{"1":"5","2":"Louis Armstrong","3":"Trumpet","4":"1919-1971","5":"Jazz","6":"6","7":"Louis Armstrong Plays W.C. Handy","8":"1954","9":"Jazz"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><strong>Inner join: Musicians and their albums.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">merge</span>(musicians, awards, <span class="at">all =</span> <span class="cn">FALSE</span>, <span class="at">by =</span> <span class="st">"musician_id"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["musician_id"],"name":[1],"type":["int"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["instrument"],"name":[3],"type":["chr"],"align":["left"]},{"label":["years_active"],"name":[4],"type":["chr"],"align":["left"]},{"label":["genre"],"name":[5],"type":["chr"],"align":["left"]},{"label":["award_id"],"name":[6],"type":["int"],"align":["right"]},{"label":["award_name"],"name":[7],"type":["chr"],"align":["left"]},{"label":["year"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"John Coltrane","3":"Saxophone","4":"1945-1967","5":"Jazz","6":"1","7":"Grammy Hall of Fame","8":"1999"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz","6":"2","7":"Grammy Lifetime Achievement Award","8":"1990"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing","6":"3","7":"Grammy Hall of Fame","8":"1999"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing","6":"4","7":"National Medal of Arts","8":"1987"},{"1":"5","2":"Louis Armstrong","3":"Trumpet","4":"1919-1971","5":"Jazz","6":"5","7":"Grammy Lifetime Achievement Award","8":"1972"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p><strong>Full join: Complete overview of musicians and their awards.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">merge</span>(musicians, awards, <span class="at">all =</span> <span class="cn">TRUE</span>, <span class="at">by =</span> <span class="st">"musician_id"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["musician_id"],"name":[1],"type":["int"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["instrument"],"name":[3],"type":["chr"],"align":["left"]},{"label":["years_active"],"name":[4],"type":["chr"],"align":["left"]},{"label":["genre"],"name":[5],"type":["chr"],"align":["left"]},{"label":["award_id"],"name":[6],"type":["int"],"align":["right"]},{"label":["award_name"],"name":[7],"type":["chr"],"align":["left"]},{"label":["year"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"John Coltrane","3":"Saxophone","4":"1945-1967","5":"Jazz","6":"1","7":"Grammy Hall of Fame","8":"1999"},{"1":"2","2":"Miles Davis","3":"Trumpet","4":"1944-1975","5":"Jazz","6":"2","7":"Grammy Lifetime Achievement Award","8":"1990"},{"1":"3","2":"Thelonious Monk","3":"Piano","4":"1934-1975","5":"Bebop","6":"NA","7":"NA","8":"NA"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing","6":"3","7":"Grammy Hall of Fame","8":"1999"},{"1":"4","2":"Ella Fitzgerald","3":"Vocals","4":"1934-1993","5":"Swing","6":"4","7":"National Medal of Arts","8":"1987"},{"1":"5","2":"Louis Armstrong","3":"Trumpet","4":"1919-1971","5":"Jazz","6":"5","7":"Grammy Lifetime Achievement Award","8":"1972"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>With <code>merge()</code>, you can achieve the same results as <code>dplyr</code>’s <strong>mutating joins</strong>, though <code>dplyr</code> provides a more explicit and often more readable syntax for many users. Both methods are powerful, and understanding both can be very useful in different contexts!</p>
<hr style="height:1pt; visibility:hidden;">


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/osu-codeclub\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/osu-codeclub/osu-codeclub.github.io/edit/main/posts/S08E04_wrangling_04/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/osu-codeclub/osu-codeclub.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>